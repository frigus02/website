server {
	listen      80;
	server_name kuehle.me;

	root       /usr/share/nginx/html;
	index      index.html;
	error_page 404 /404/;

	server_tokens off;
	gzip          on;
	add_header    Content-Security-Policy "default-src 'none'; script-src 'self'; style-src 'self' fonts.googleapis.com; font-src fonts.gstatic.com; img-src 'self'; base-uri 'none'; frame-ancestors 'none';";
	add_header    Referrer-Policy "no-referrer";
	add_header    X-Content-Type-Options "nosniff";
	add_header    X-XSS-Protection "1; mode=block";

	if ($http_x_forwarded_proto = "http") {
		return 301 https://$server_name$request_uri;
	}

	# HSTS header is already set by Kubesail
	#add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";

	location / {
		add_header Cache-Control "no-cache";
	}

	location /static/ {
		add_header Cache-Control "max-age=31536000";
	}
}
